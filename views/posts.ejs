<%- include('partials/header', { title: 'All Posts', user: user }) %>

<div class="min-vh-100 bg-black py-5">
  <div class="container">
    
    <!-- Page Header -->
    <div class="card shadow-lg border-0 rounded-4 mb-4">
      <div class="card-header rounded-top-4" style="background-color: #ffb84d; color: #000;">
        <h3 class="mb-0 fw-semibold text-center">
          <i class="fas fa-newspaper me-2"></i> All Posts [ <%= posts.length %> ]
        </h3>
      </div>
    </div>

    <!-- Posts Grid -->
    <div class="row">
      <% if (posts.length > 0) { %>
        <% posts.forEach(post => { %>
          <div class="col-md-4 mb-4">
            <div class="card shadow-lg border-0 rounded-4 h-100 overflow-hidden">
              
              <!-- Post Image -->
              <% if (post.images && post.images.length > 0) { %>
                <img src="<%= post.images[0].url %>" alt="Post Image"
                  class="post-card-img" />
              <% } else { %>
                <img src="https://via.placeholder.com/400x200?text=No+Image" alt="No Image"
                  class="post-card-img" />
              <% } %>

              <!-- Card Body -->
              <div class="card-body p-3" style="background-color: rgb(57,57,57);">
                <h5 class="card-title fw-bold" style="color: #ffb84d;"><%= post.title %></h5>
                <p class="card-text text-light small">
                  by <strong><%= post.author.username %></strong><br>
                  <span class="fst-italic"><%= post.createdAt.toDateString() %></span>
                </p>
                <a href="/posts/<%= post._id %>" class="btn-post w-100">
                  <i class="fas fa-book-open me-1"></i> Read More
                </a>
              </div>
            </div>
          </div>
        <% }) %>
      <% } else { %>
        <p class="text-center text-light fst-italic">No posts available. ðŸš€</p>
      <% } %>
    </div>
  </div>
</div>

<style>
  /* Post Card Image */
  .post-card-img {
    width: 100%;
    height: 200px;
    object-fit: cover;
    display: block;
  }

  /* Button Style */
  .btn-post {
    border: 2px solid #ffb84d;
    border-radius: 5px;
    padding: 6px 15px;
    background-color: #000;
    color: #ffb84d;
    font-weight: 600;
    transition: all 0.3s ease;
    text-align: center;
    text-decoration: none;
    display: inline-block;
  }
  .btn-post a{
    text-decoration: none;
  }
  .btn-post:hover {
    background-color: #ffb84d;
    color: #000;
    text-decoration: none;

  }
</style>

<%- include('partials/footer') %>
